---
sidebar_position: 2
---

# Intel Realsense D435

The **[Intel Realsense](https://www.intelrealsense.com/depth-camera-d435/)** is an RGB and depth camera that offers stereo depth sensing alongside RGB imaging for 3D perception and obstacle detection.


## Technical Specifications
**Camera Specifications:**
- RGB Camera: 2MP color sensor with DFOV of 69.4° 
- Depth Sensing: Stereo infrared (IR) cameras with a DFOV of 85.2°
- Dimensions: 36x54.5x27.8 mm
- Weight: 53.1g


``` text title="Sensor Specifications"
DFOV/HFOV/VFOV:         69.4°/55°/42°
Depth DFOV/HFOV/VFOV:   85.2°/69°/42°
RGB Resolution:         2MP (1920x1080)
Depth Resolution:       1280x720
Focus:                  Fixed focus (RGB)
Max Framerate:          90 FPS (depth), 30 FPS (RGB)
Spectral range:         Visible (RGB), Infrared (depth)
Shutter Type:           Rolling shutter
Sensor size:            1/3" (RGB)
Depth Accuracy:         ±2% at 2 meters
Depth Range:            0.1m to 10m
Pixel size:          	1.4µm (RGB), 3µm (depth IR)
```

## Intel RealSense Integration with YOLOv8

The **Intel RealSense D435** was significantly easier to integrate with the **YOLOv8** computer vision model. By utilizing the [Intel RealSense SDK](https://intelrealsense.github.io/librealsense/python_docs/_generated/pyrealsense2.html), we were able to seamlessly obtain both depth and RGB frames necessary for performing **object detection**, **object classification**, and **position estimation**. However, it is important to note that the SDK only supports **Linux** and **Windows** operating systems.

## Performance and Testing
TODO: ADD video of the depth map
<div style={{ display:'flex', justifyContent:'center', alignItems:'center', marginBottom:'20px' }}>
    <img src="../IMG_5467.gif" height="319" style={{ marginRight: '30px' }}/>
    <img src="../video.gif" height="319"/>
</div>

During the initial testing phase, the D435 outperformed the OAK-1 W camera, achieving an average of **20 FPS** on the **Jetson Orin Nano** for both object classification and detection using YOLOv8. Additionally, we found that the RealSense camera worked best with a resolution of **640x480**. Leveraging the depth map generated by the Intel RealSense, we were able to accurately calculate the distance of detected objects to the camera.

We conducted verification of the depth sensor's accuracy by detecting litter at various distances while displaying each measurement, increasing by **10 cm intervals** from **40 cm to 140 cm**. While the depth sensor showed an error margin of **± 3%**, we considered this negligible for our application.

## Position Estimation
We utilized the depth map from the **Intel RealSense** to measure the distance of litter from the camera, enabling us to calculate the coordinates of each litter relative to the camera. The coordinates are then shown in the output.

To achieve this, we applied a transformation matrix that converts the camera's coordinate system to the world coordinate system. This transformation accounts for the camera's angle and translation. The transformation matrix used for position estimation is:

<div style={{ display:'flex', justifyContent:'center', alignItems:'center', marginBottom:'20px' }}>
    <img src="../equation1.png" style={{ marginRight: '30px' }}/>
</div>

Where:

- ***X<sub>cam</sub>***, ***Y<sub>cam</sub>***, ***Z<sub>cam</sub>*** are the object coordinates in the camera's frame.
- **θ** is the angle of displacement along the Y-axis (anticlockwise).
- ***Y<sub>trans</sub>*** and ***Z<sub>trans</sub>*** are the translation distances along the Y and Z axes, respectively.

This transformation matrix allows us to compute the accurate position of detected litter by compensating for any camera tilt or displacement. By using this method, we ensure precise litter location data relative to the camera's position, which is vital for efficient operation of the indoor cleaning robot.



## Summary

### Findings
1. The D435 camera can only perform detection with a consistent **15FPS**.
2. For position estimation, the offset of the depth sensor to the center of the Realsense is +35mm.
3. D435 provided consistent detection outcomes for both **stationary** and **moving objects**


### Limitations
1. The D435's wide angle view does not interfere with the object recognition.
2. The Intel Realsense SDK only supports Linux and Windows for Python.